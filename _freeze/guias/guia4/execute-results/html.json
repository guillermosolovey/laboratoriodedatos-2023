{
  "hash": "22ae5208ca1725b723c8852e271ca598",
  "result": {
    "markdown": "---\ntitle: \"Guía 4: Transformación de datos\"\nsubtitle: \"Laboratorio de datos 2023 (comisión: G. Solovey)\"\nformat:\n  html: \n    theme: cosmo\n    toc: true\n    toc-depth: 2\n    fontsize: 1em\n    linestretch: 1.15\neditor: source\n---\n\n::: {.cell}\n\n:::\n\n\n# 1. Transformación de datos\n\nPara estos ejercicios, usar el dataset `penguins` del paquete `palmerpenguins`.\n\n\n1.1  Usar `filter()` para crear un subconjunto de datos que contenga sólo pinguinos de la isla Biscoe y que tengan un pico de 48 mm de largo o más.\n\n1.2 Crear otro dataset con la información de pinguinos Adelie machos que no hayan sido vistos en el año 2008.\n\n1.3 Del dataset `penguins` quedarse con todas las variables excepto `year`, `sex` y `body_mass_g`. \n\n1.4 Crear un subconjunto de los datos de `penguins` sólo con las obsevaciones de pinguinos machos con aletas (*flipper*) de más de 200 mm de largo y quedarse con todas las columnas que terminan con \"mm\". (*Ayuda: explorar cómo se usa la función `ends_with()` y sus parientes [acá](https://tidyselect.r-lib.org/reference/starts_with.html)*).\n\n1.5 Empezando con `penguins`, hacer un `pipe` (`%>%`) que:\n\n* se quede sólo con las observaciones de la isla Dream.\n* se quede con las variables `species` y todas las que empiece con `bill`. \n\n1.6 Convertir todas las variables que empiezan con `bill` a mayúsculas. (*Ayuda: `?rename_with` y `toupper()` *)\n\n1.7 Empezando con `penguins` hacer lo siguiente con un único llamado a la función\n`mutate()`:\n\n* Convertir la variable `species` a `character`.\n* Crear una nueva variable que tenga el peso en Kg.\n* Convertir la variable `island` a minúscula.\n\n1.8 Empezando con `penguins` crear una tabla resumen que contenga para el \nlargo mínimo y máximo de las aletas de los pinguinos Adelie, agrupados\npor isla. \n\n1.9 Empezando con `penguins`, agrupar los datos por especie y año, luego crear una tabla de resumen que contenga el ancho del pico (llamarla `bill_depth_mean`) y el largo del pico (llamarla `bill_length_mean`) para cada grupo\n\n1.10 Empezando con `penguins`, hacer una secuencia de operaciones ` %>%` que:\n\n* Agregue una nueva columna llamada `bill_ratio` que sea el cociente entre el largo y el \nancho del pico.\n* Quedarse sólo con las columnas `species` y `bill_ratio`.\n* Agrupar los datos por especie.\n* Crear una tabla de resumen que contenga el promedio de la variable `bill_ratio` por especie\ny que el nombre de la columna en la tabla sea `bill_ratio_mean`).\n\n1.11 Usar `rename()` para cambiarle el nombre a la variable `body_mass_g` y llamarla `masa_corporal_g`.\n\n1.12 Calcular la mediana de la masa corporal de los pinguinos de cada especie usando `group_by` y\n`summarise()`.\n\n1.13 Empezando con `penguins`, escribir una secuencia de operaciones ` %>% ` que:\n\n* Excluya a los pinguinos observados en la isla Biscoe.\n* Sólo se quede con las variables que están entre `species` y `body_mass_g` inclusive.\n* Renombrar la variable `species` a `especie_pinguino`.\n* Agrupar los datos por la variable `especie_pinguino`.\n* Encontrar el valor medio de las variables que contienen el string “length”, \nseparando por la especie del pinguino, y llamando a las columnas como las originales\npero agregando \"_mean\" al final.\n\n\n1.14\nEmpezando con `penguins`, contar cuántas observaciones hay por especie, isla y año.\n\n1.15\nEmpezando con `penguins`, quedarse sólo con los pinguinos Adelie y gentoo penguins. Luego\ncontar cuántos hay por cada especie y sexo.\n\n1.16\nAgregar una nueva columna a la base de datos llamada `peso_bin` que contenga:\n\n* “chico” si la masa corporal es menos que 4000 gramos.\n* “grande” si la masa corporal es menos que 4000 gramos.\n\n1.17\nEmpezando con `penguins` quedarse sólo con las observaciones correspondientes a pinguinos\nchinstrap. Luego, quedarse sólo con las variables `flipper_length_mm` y `body_mass_g`. \nAgregar una nueva columna llamada `fm_ratio` que contenga el cociente entre el largo de la \naleta y el peso del pinguino. Luego quedarse solo con las observaciones que no tienen `NA` en \nninguna columna (*ayuda: `?drop_na()`*) y agregar otra columna llamada `ratio_bin` que contenga\nla palabra \"alto\" si `fm_ratio` es mayor o igual que 0.05 y \"bajo\" si el cociente es menor\nque 0.05).\n\n\n# 2. Exploración de datos\n\nPara resolver estos ejercicios usando lo que han aprendido de transformación, exploración \ny visualización de datos usando los paquetes de `tidyverse`.\n\n2.1 ¿Te parece que los pinguinos macho tienen más masa corporal que las hembras? Poner a prueba\ntu intiuición con visualizaciones y estadística descriptiva.\n\n2.2 ¿Te parece que pinguinos con pico más largo (`bill_length_mm`) tienen a su vez el pico \nmás ancho (`bill_depth_mm`)? Poner a prueba esta intuición con visualizaciones y estadística \ndescriptiva.\n\n2.3 En el 2.2 ¿da igual si consideran cada especie \ndel pinguino por separado? ¿Qué tiene esto que ver con la paradoja de Simpson?\n\n2.4 Repetir 2.1 pero tomando un subconjunto aleatorio de $N$ pinguinos (explorar diferentes \nnúmeros para $N$) (*Ayuda: buscar `?sample_n()`*). \n\n\n# Referencias\n\n- Recomendamos [esta clase](https://youtube.com/playlist?list=PLYqQ3ecJzraETao-jyb4VMO-5bhhPoX4G&si=1iqsm1a1cRGonO_b) de la Dra. Lucía Babino del Instituto de Cálculo.\n- [tutorial](https://allisonhorst.shinyapps.io/dplyr-learnr/#section-welcome) de dplyr.\n- Cap. 3 de [Data Science. A First Introduction](https://datasciencebook.ca/). Tiffany Timbers, Trevor Campbell, and Melissa Lee.\n- Cap. 4 de [R for Data Science (2e)](https://r4ds.hadley.nz/). Hadley Wickham, Mine Çetinkaya-Rundel, and Garrett Grolemund.\n\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}